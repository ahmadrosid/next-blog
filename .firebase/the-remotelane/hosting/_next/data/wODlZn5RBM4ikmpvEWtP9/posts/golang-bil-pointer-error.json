{"pageProps":{"postData":{"id":"golang-bil-pointer-error","contentHtml":"\n<p>Secara cepat atau lambat saat kamu sedang menulis program dalam pemrogramman go kamu pasti akan menemui error berikut ini.</p>\n<div class=\"remark-highlight\">\n  <pre class=\"language-unknown\"><code class=\"language-unknown\">panic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x2 addr=0x0 pc=0x1021ef40c]\n\ngoroutine 1 [running]:\nmain.main()\n        /.../main.go:14 +0x1c\nexit status 2</code></pre>\n</div>\n<h2>Apa itu error nil pointer?</h2>\n<p>Di golang <code>nil</code> adalah sebuah penanda untuk memory kosong dalam setiap data yang kita buat. Sebagai contohnya kita membuat struct <code>User</code> lalu kita membuat <em>instance</em> baru dan tidak memberika nilai pada properti didalamnya.</p>\n<p>Sedangkan pointer adalah referensi terhadap suatu data yang ditandai dengan keyword <code>&#x26;</code>. Golang sendiri diadaptasi dari bahasa <code>C</code> yang mana dalam bahasa <code>C</code> juga menggunakan karakter <code>&#x26;</code> untuk membuat sebuah pointer.</p>\n<p>Pointer ini sangat berguna jika kita ingin mengunakan sebuah data kedalam beberapa <em>function</em> tanpa harus menduplikatnya. Dengan begitu kita bisa membuat sebuah program yang lebih irit memory dan membuatnya lebih cepat.</p>\n<p>Praktik menggunakan pointer ini sudah ada sejak jaman dahulu karena pada saat itu komputer yang ada tidak memiliki ram yang sangat besar seperti yang kita miliki saat ini. Akan tetapi meskipun begitu kita juga harus tetap bijak dalam menggunakan ram saat membuat sebuah program.</p>\n<p>Jangan mentang - mentang RAM komputer jaman sekarang ukurannya besar - besar kita se-enaknya saja menggunakan memory secara tidak optimal.</p>\n<h2>Kenapa error nil pointer bisa terjadi?</h2>\n<p>Error nil pointer ini terjadi ketika kita mengkases sebuah data yang tidak ada nilai nya. Hal ini menjadi salah satu kelemahan dari golang, karena tidak ada mekanisme untuk mencegah keamanan penggunaan <em>memory</em>. Bahkan seorang yang sudah senior juga terkadang sering melakukan kesalan ini.</p>\n<p>Secara umum error ini terjadi ketika kita mengambil data dari sebuah <em>function</em> yang mengembalikan referensi dari sebuah data. Kadang juga terjadi ketika kita lupa untuk mengecek apakah <em>function</em> yang kita panggil mengembalikan error atau tidak.</p>\n<p>Sebagai contoh adalah <code>function</code> berikut ini.</p>\n<div class=\"remark-highlight\">\n  <pre class=\"language-unknown\"><code class=\"language-unknown\">function getUser() (*User, error) {...}</code></pre>\n</div>\n<p>Function ini mengambalikan dua data yaitu pointer dari <code>User</code> dan <code>error</code>. Yang sering terjadi adalah pointer dari <code>User</code> akan memiliki nilai <code>nil</code> ketika nilai <code>error</code> tidak <code>nil</code>.</p>\n<h2>Contoh error nil pointer</h2>\n<p>Kita coba untuk membuat program yang sederhana untuk mensimulasikan <em>error nil pointer</em> ini.</p>\n<div class=\"remark-highlight\">\n  <pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">type</span> User <span class=\"token keyword\">struct</span> <span class=\"token punctuation\">{</span>\n\tname <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">var</span> data<span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">=</span> <span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\tname <span class=\"token operator\">:=</span> data<span class=\"token punctuation\">.</span>name\n\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%+v\\n\"</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">getData</span><span class=\"token punctuation\">(</span>shouldNotError <span class=\"token builtin\">bool</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>User<span class=\"token punctuation\">,</span> <span class=\"token builtin\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token operator\">!</span>shouldNotError <span class=\"token punctuation\">{</span>\n\t\tuser <span class=\"token operator\">:=</span> User<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\t\tuser<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"Ahmad Rosid\"</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token operator\">&#x26;</span>user<span class=\"token punctuation\">,</span> <span class=\"token boolean\">nil</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">nil</span><span class=\"token punctuation\">,</span> errors<span class=\"token punctuation\">.</span><span class=\"token function\">New</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Failed to get data!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n</div>\n<p>Dari kode diatas kita bisa melihat error nil akan terjadi ketika kita mengakses data <code>user.name</code> karena function <code>getData</code> akan memberikan nil pointer untuk struct <code>User</code> karena kita memberikan <em>parameter</em> <code>shouldNotError</code> dengan nilai <code>true</code>.</p>\n<h2>Cara mengatasi error error nil pointer</h2>\n<p>Cara untuk mengatasi error nil pointer ini sangat mudah yaitu dengan cukup memastikan kita tidak mengakses data yang nilainya adalah <code>nil</code>. Maka dari itu kita bisa melakukan pengencekan nilai dari data <code>User</code> dulu apakah dia nil ata tidak.</p>\n<div class=\"remark-highlight\">\n  <pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">var</span> data<span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">=</span> <span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">if</span> data <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n    name <span class=\"token operator\">:=</span> data<span class=\"token punctuation\">.</span>name\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%+v\\n\"</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n</div>\n<p>Ada cara lain untuk mengatasi masalah ini. Kita tau dari function <code>getData</code> akan selalu memberikan <code>return</code> nil ketika terjai error. Jadi yang kita cek bukan lagi data nya tapi adalah error nya.</p>\n<div class=\"remark-highlight\">\n  <pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">var</span> data<span class=\"token punctuation\">,</span> err <span class=\"token operator\">=</span> <span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">if</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">.</span><span class=\"token function\">Error</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span>\n<span class=\"token punctuation\">}</span>\nname <span class=\"token operator\">:=</span> data<span class=\"token punctuation\">.</span>name\nfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%+v\\n\"</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span>\n</code></pre>\n</div>\n<h2>Contoh kode</h2>\n<p>Dengan semua itu beginilah contoh kode nya secara lengkap untuk mengatasi error ini.</p>\n<div class=\"remark-highlight\">\n  <pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">package</span> main\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token string\">\"errors\"</span>\n\t<span class=\"token string\">\"fmt\"</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">type</span> User <span class=\"token keyword\">struct</span> <span class=\"token punctuation\">{</span>\n\tname <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">var</span> data<span class=\"token punctuation\">,</span> err <span class=\"token operator\">=</span> <span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">if</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">.</span><span class=\"token function\">Error</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n\tname <span class=\"token operator\">:=</span> data<span class=\"token punctuation\">.</span>name\n\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%+v\\n\"</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">getData</span><span class=\"token punctuation\">(</span>shouldNotError <span class=\"token builtin\">bool</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>User<span class=\"token punctuation\">,</span> <span class=\"token builtin\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token operator\">!</span>shouldNotError <span class=\"token punctuation\">{</span>\n\t\tuser <span class=\"token operator\">:=</span> User<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\t\tuser<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"Ahmad Rosid\"</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token operator\">&#x26;</span>user<span class=\"token punctuation\">,</span> <span class=\"token boolean\">nil</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">nil</span><span class=\"token punctuation\">,</span> errors<span class=\"token punctuation\">.</span><span class=\"token function\">New</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Failed to get data!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n</div>\n<h2>Kesimpulan</h2>\n<p>Sebagai penutup mari kita ulas lagi hal penting dari pembahasan kita kali ini.</p>\n<ul>\n  <li>Golang tidak memiliki seknario untuk mencegah kesalah dalam mengkases sebuah memory.</li>\n  <li>Nil pointer error terjadi ketika kita mengakses data yang yang berisi nil.</li>\n  <li>Pointer adalah salah satu fitur untuk mengoptimalkan penggunaan memory di golang.</li>\n  <li>Meskipun pointer bisa mempercepat program kita, dia juga bisa membuat kita terjebak error nil.</li>\n  <li>Selalu pastikan kita melakukan pengecekan data yang kemungkinan memerikan nil pointer.</li>\n  <li>Untuk mengetahui apakah sebuah kode berpotensi memberikan nilai nil bisa dengan mengecek function yang mengembalikan pointer yang di tandai dengan <code>return &#x26;...</code> dan <code>somefunction() *User...</code>.</li>\n</ul>\n","excerpt":"\nSecara cepat atau lambat saat kamu sedang menulis program dalam pemro...","title":"Bagaimana mengatasi error nil pointer di Golang?","date":"2022-12-30T10:34:33.208Z","image":"/images/","tags":"golang","published":true}},"__N_SSG":true}